<!DOCTYPE html>
<html>
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script>
        window.addEventListener( "pageshow", function ( event ) {
            var historyTraversal = event.persisted || 
                                    ( typeof window.performance != "undefined" && 
                                        window.performance.navigation.type === 2 );
            if ( historyTraversal ) {
				// Handle page restore.
				console.log("reload")
                window.location.reload();
            }
            });
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131730172-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-131730172-1');
</script>

	
<title>2StrucCompare</title>

	<meta name="description" content="" />
	<meta name="keywords" content="" /> 

<link rel="stylesheet" href="../bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

<style>
	#main-content {
		margin-top:20px;
	}
	.footer {
		font-size: 12px;
		text-align: center;
	}
	#refs {
		display:none;
	}
</style>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="../popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="../bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip(); 
});
</script>	<style>
		.col-md-5.grey {
			background-color: #f5f3f3;
		}
		#loadingmsg {
			color: white;
			font-size: 200%;
			padding: 10px;
			position: fixed;
			float: left;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			/* top: 50%;
			left: 30%; */
			/* text-align: center; */
			z-index: 100;
			/* margin-right: -50%;
			margin-bottom: -50%; */
		}
		#loadingover {
			background: black;
			z-index: 99;
			width: 100%;
			height: 100%;
			position: fixed;
			top: 0;
			left: 0;
			-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
			filter: alpha(opacity=80);
			-moz-opacity: 0.8;
			-khtml-opacity: 0.8;
			opacity: 0.8;
		}
	</style>
</head>
<body>
	
<div id='loadingmsg' style='display: none;'><center>Please wait...<center>
	<center><br><div class="progress">
	<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="100" aria-valuemax="100" style="width: 100%"></div>
	</div><center></div>
<div id='loadingover' style='display: none;'></div>

<div class='container'>
	<center><img src="static/img/2struc_2_new.jpg" style="width: 400px"></center>
	<hr>
</div><div class="container">
	<ul class="nav nav-pills justify-content-center">
	  <li class="nav-item">
	    <a class="nav-link active" href="index.php">Home</a>
	  </li>
	  <li class="nav-item">
	    <a class="nav-link " href="methods.php">The Methods</a>
	  </li>
		<li class="nav-item">
	    <a class="nav-link " href="help.php">Help</a>
	  </li>
	  <li class="nav-item">
	    <a class="nav-link " href="about.php">About Us</a>
	  </li>
	  <li class="nav-item">
	    <a class="nav-link " href="contact.php">Contact</a>
	  </li>
	</ul>
	<hr>
</div>
<div class="container" id="main-content">

<div class="row">
	<div class="col-md">
		<p>2StrucCompare is a webserver for the comparison of secondary structure algorithms and the secondary structure of protein structures.</p>
		<p>To calculate the secondary structure of a single protein using a variety of secondary structure assignment methods, use "2Struc" below. To compare the secondary structures between two different protein structures, use "2StrucCompare".</p>
		<p>For 2StucCompare, you can upload either two files, input two codes, or input one code and upload one file. If you are going to compare a code and a file, use the first input for file upload and first input for the codes only.</p>
		<div class="alert alert-primary" role="alert">
		Due to user feedback, the colour scheme of the CA DISTANCE and SC DISTANCE options in 2StrucCompare has been altered. If you require the old colour scheme (blue-yellow-red) please <a href="mailto:e.drew@qmul.ac.uk" class="alert-link">email</a> us.
		</div>
	</div>
</div>
<hr>

<div class="row row-eq-height">

<div class="col-md-5 grey">
	
	<center><h3> 2StrucCompare </h3></center>
	<p>
		<br>
  	 <form action="upload_two.php" method="post"
		enctype="multipart/form-data">

	<input type="hidden" name="id" value=5e823e5bb2ac4> 		

			<label for="file">File 1:</label>
			<input type="file" name="file1" id="file1" autocomplete="off">
			<span class="badge badge-pill badge-secondary" data-toggle="tooltip" title="Upload a structure file - must be in *.pdb, *.ent or *.cif format. If you are comparing an uploaded file against a code, use this input for the file.">i</span>
			<br>
			<label for="file">File 2:</label>
			<input type="file" name="file2" id="file2" autocomplete="off">
			<span class="badge badge-pill badge-secondary" data-toggle="tooltip" title="Upload another structure file - must be in *.pdb, *.ent or *.cif format. Only use this if you are comparing an uploaded file against another uploaded file.">i</span>
	<hr>
	<center><small><i>OR</i></small></center>
	<hr>
	<br>
	 		<label for="pdb">PDB Code 1:</label>
			<input type="text" maxlength="4" name="pdb1" id="pdb1">
			<span class="badge badge-pill badge-secondary" data-toggle="tooltip" title="Type in a four-letter PDB code. If you are comparing an uploaded file against a code, use this input for the code.">i</span>
			<br>
			<label for="pdb">PDB Code 2:</label>
			<input type="text" maxlength="4" name="pdb2" id="pdb2">
			<span class="badge badge-pill badge-secondary" data-toggle="tooltip" title="Type in another four-letter PDB code. Only use this input if you are comparing a code against another code.">i</span>
			<!-- <h5>PDB lookup temporarily unavailable - apologies</h5> -->
	
	<hr>
	<center>
			<input type="submit" name="submit" value="Submit" id="compStrucButton" onclick="showLoading()" disabled>
	</center>

	</form>

	<a href="https://2struccompare.cryst.bbk.ac.uk/calc_two.php?pdb1=1hzx&pdb2=3cap&id=5c1ba60e3422f&mode=code&chains1=0A~1~348.0B~1~326&chains2=0A~1~326.0B~1~326" onclick="showLoading()">Click for example (1hzx vs 3cap)</a>
	<br>
	<a href="https://2struccompare.cryst.bbk.ac.uk/calc_two.php?pdb1=1t18&pdb2=1t1a&id=5c1ba60e3sddc&mode=code&chains1=0A~1~125&chains2=0A~1~125"  onclick="showLoading()">Click for example (1t18 vs 1t1a)</a>	
	</p>
	

</div>
<div class="col-md-2"><br><br></div>
<div class="col-md-5 grey">
	
	<center><h3> 2Struc </h3></center>
<p> <br>
  	 <form action="upload_one.php" method="post"
		enctype="multipart/form-data">

	<input type="hidden" name="id" value=5e823e5bb2b22> 			

		<label for="file">Filename:</label>
		<input type="file" name="file" id="twoStrucFile" autocomplete="off">
		<span class="badge badge-pill badge-secondary" data-toggle="tooltip" title="Upload a single file to be analysed - must be in *.pdb, *.ent or *.cif format.">i</span>
<hr>
<center><small><i>OR</i></small></center>
<hr>
<br>
 		<label for="pdb">PDB Code:</label>
		<input type="text" maxlength="4" name="pdb" id="twoStrucCode">
		<span class="badge badge-pill badge-secondary" data-toggle="tooltip" title="Type in a single four-letter PDB code.">i</span>
		<!-- <h5>PDB lookup temporarily unavailable - apologies</h5> -->
<!-- <hr>
		<label for="nmr">Split NMR models?</label>
		<input type="checkbox" name="nmr" value="Yes" />
		<span class="badge badge-pill badge-secondary" data-toggle="tooltip" title="Check this box if you want to analyse and compare each model if the PDB file contains multiple models. If left unchecked, only the first model is analysed.">i</span>


<hr> -->
<br>
<center>
		<input type="submit" name="submit" value="Submit" id="twoStrucButton" onclick="showLoading();" disabled>
</center>

	  </form>
	  <a href="https://2struccompare.cryst.bbk.ac.uk/example_one.php" onclick="showLoading()">Click for example (2cga)</a>
	</p>

</div>


</div>
<br>
<hr>
<br>
<div class="row">
	<div class="col-md-1"></div>
	<div class="col-md-4">
		<a class="twitter-timeline" data-width="400" data-height="300" data-dnt="true" href="https://twitter.com/pcddb?ref_src=twsrc%5Etfw">Tweets by pcddb</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 
	</div>
	<div class="col-md-1"></div>
	<div class = "col-md-6">
		<br>
	<table style="padding:0 15px 0 15px">
		<tbody><tr>
			<td>
				<a href="http://pcddb.cryst.bbk.ac.uk/" target="blank"><img border="0" alt="Protein Ciruclar Dichroism Data Bank" src="static/img/pcddb.png" width="150" height="75"></a>
			</td>
			<td style="padding:0 0px 0 15px">
				<h6>Database for SRCD and CD spectral data and tools for validation and comparison of CD data.</h6>
			</td>
		</tr>
		<tr>
			<td>
				<a href="http://dichroweb.cryst.bbk.ac.uk/" target="blank"><img border="0" alt="DichroWeb" src="static/img/dwlogo2.png" width="150" height="75"></a><br>
			</td>
			<td style="padding:0 0px 0 15px">
				<h6>Obtain secondary structure content from CD spectra using DichroWeb.</h6>
			</td>
		</tr>
		<tr>
			<td>
				<a href="http://pdb2cd.cryst.bbk.ac.uk/" target="blank"><img border="0" alt="pdb2cd2" src="static/img/banner_old.jpg" width="150" height="75"></a><br>
			</td>
			<td style="padding:0 0px 0 15px">
				<h6>Prediction of CD spectra from atomic crystal structures.</h6>
			</td>
		</tr>
	</tbody></table>
	</div>
</div>
</div>

<div class="footer">
	E.D. Drew and R.W. Janes (Queen Mary University of London) 2020</div><script>
function showLoading() {
    document.getElementById('loadingmsg').style.display = 'block';
    document.getElementById('loadingover').style.display = 'block';
}

document.addEventListener("DOMContentLoaded", function () {
	id_list=['pdb1', 'pdb2', 'file1', 'file2','twoStrucFile', 'twoStrucCode']
	for(i=0;i<id_list.length;i++){
		console.log(id_list[i])
		document.getElementById(id_list[i]).value=""
		
	}

	jQuery("#compStrucButton").prop('disabled', true);
	jQuery("#twoStrucButton").prop('disabled', true);
})

var toValidate = jQuery('#pdb1, #pdb2, #file1, #file2'),
    valid = false;
toValidate.on('input',function () {
    if (jQuery(this).val().length > 3) {
        jQuery(this).data('valid', true);
    } else {
        jQuery(this).data('valid', false);
	}
	numberValid=0
	for (i=0;i<4; i++){
		if(jQuery(toValidate[i]).data('valid') == true){
			numberValid++
		}
	}
	console.log(numberValid)
    if ((jQuery(toValidate[0]).data('valid') == true && jQuery(toValidate[1]).data('valid') == true && numberValid==2) || (jQuery(toValidate[2]).data('valid') == true && jQuery(toValidate[3]).data('valid') == true  && numberValid==2) || (jQuery(toValidate[0]).data('valid') == true && jQuery(toValidate[2]).data('valid') == true  && numberValid==2)) {
			valid = true;
	}else{
		valid= false;
	}
    if (valid === true) {
        jQuery("#compStrucButton").prop('disabled', false);
    } else {
        jQuery("#compStrucButton").prop('disabled', true);
    }
});

var toValidate2 = jQuery('#twoStrucFile, #twoStrucCode'),
    valid2 = false;
toValidate2.on('input',function () {
    if (jQuery(this).val().length > 3) {
        jQuery(this).data('valid', true);
    } else {
        jQuery(this).data('valid', false);
    }
    if (jQuery(toValidate2[0]).data('valid') == true || jQuery(toValidate2[1]).data('valid') == true) {
			valid2 = true;
	}else{
		valid2= false;
	}
    if (valid2 === true) {
        jQuery("#twoStrucButton").prop('disabled', false);
    } else {
        jQuery("#twoStrucButton").prop('disabled', true);
    }
});
</script>
</body>
</html>
