
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>HudsonAlpha Discovery</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="HudsonAlpha Discovery website">
    <meta name="author" content="HAD">

    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/static/css/gsl.css" rel="stylesheet">
    
    

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="/static/ico/favicon.ico"></link>
  </head>

  <body>

    <div class="navbar navbar-static-top navbar-inverse" style="padding-bottom:20px">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <ul class="nav pull-right">
            <li class="divider-vertical"></li>
            
              <li><a href="/users/login">Login</a></li>
            
            <li class="divider-vertical"></li>
          </ul>
          <div class="nav-collapse">
            <ul class="nav">
              <li>
                <a href="/index" style="padding:2px;margin-top:5%">
                  <img src="/static/img/HudsonAlpha-TypeOnly-Reverse_brint-lighter2.png">
                </a>
              </li>
              <li><a href="/">Home</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle needsclick" data-toggle="dropdown">
                  About
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                  <li><a href="/information/about">About Us</a></li>
                  <li><a href="/information/policies">Policies</a></li>
                  <li><a href="/information/faq">FAQ</a></li>
                  <li><a href="/publications/list">Publications</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle needsclick" data-toggle="dropdown">
                  Services
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                  <li class="dropdown-submenu">
                    <a href="/information/dna">DNA</a>
                    <ul class="dropdown-menu">
                      <li><a href="/information/10X">10X Chromium</a></li>
                      <li><a href="/information/methyl">Methylation</a></li>
                      <li><a href="/information/meta">Metagenomics</a></li>
                      <li><a href="/information/dna">other DNA services</a></li>
                    </ul>
                  </li>
                  <li><a href="/information/rna">RNA</a></li>
                  <li><a href="/information/library">Library</a></li>
                  <li><a href="/information/sample">Sample Requirements</a></li>
                  <li><a href="/information/platforms/sequencing">Platforms</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle needsclick" data-toggle="dropdown">
                  Software
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                  <li><a href="/information/software/wget_curl_download">
                    Wget/cURL downloader
                  </a></li>
                  <li><a href="/information/software/merge_fastqs_by_lib">
                    fastq merger
                  </a></li>
                  <li><a href="/information/software/unzip">GSL unzip</a></li>
                  <li><a href="/information/software/bam2fastq">bam2fastq</a></li>
                </ul>
              </li>
              <li><a href="/information/about">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div><!-- /navbar -->

    <div class="container">
      
        
          
        
      
      
        
          <h1 style="text-align:center">bam2fastq</h1>
          <br>
        
      
      
  <legend class="text-warning">
    This software is no longer supported by HudsonAlpha Discovery. We recommend using
    <a href="http://picard.sourceforge.net">Picard</a>'s SamToFastq to accomplish this task.
  </legend>
  <p>
    The <a href="http://samtools.sourceforge.net/" target="_blank">BAM format</a> is an efficient method for storing
    and sharing data from modern, highly parallel sequencers. While primarily used for storing alignment information, BAMs can
    (and frequently do) store unaligned reads as well.
  </p>
  <p>
    There are a growing number of general-purpose SAM/BAM manipulation programs, including 
    <a href="http://samtools.sourceforge.net/samtools-c.shtml" target="_blank">SAMtools</a>, 
    <a href="http://picard.sourceforge.net/index.shtml" target="_blank">Picard</a>, and 
    <a href="http://github.com/pezmaster31/bamtools" target="_blank">Bamtools</a>. This tool is not intended 
    to duplicate the complex suite of tasks those programs perform. Rather, it is simply intended to extract
    raw sequences (with qualities). We envision this tool being primarily useful to those wishing to duplicate
    or extend previous analyses.
  </p>
  <h2>Installing</h2>
  <p>
    This program requires the standard GNU development environment (gcc and make), along with the SAMtools
    source code (included) and the <a href="http://zlib.net/" target="_blank">zlib compression library</a>.
    <br><br><a href="/static/software/bam2fastq-1.1.0.tgz">Download</a>
    the distribution and extract it with <code>tar -xzf</code>. Change into the extracted directory and run <code>make</code>.
  </p>
  <br>
  <h2>Version History</h2>
  <dl>
  <dt><p><a href="/static/software/bam2fastq-1.1.0.tgz"><b>1.1.0</b></a> (18 August 2010)</p></dt>
  <dd><p>Added <code>--strict</code> option</p></dd>
  <dd><p>Altered default handling of read names</p></dd>
  <dt><p><a href="/static/software/bam2fastq-1.0.0.tgz"><b>1.0.0</b></a> (17 August 2010)</p></dt>
  <dd><p>Initial Release</p></dd>
  </dl>
  <h2>Usage Notes</h2>
  <p>Several assumptions are made about the format of the BAM file:</p>
  <ul>
    <li>All reads, including reads without alignments, are stored in the file.</li>
    <li>
      All reads in the file belong to a single read group. The lane number and paired status is 
      determined based on the first read encountered and assumed to be correct for all other reads in the file.
    </li>
    <li>
      Each read is only stored in the file once. If multiple alignments are present for a single read,
      the read will be output once per alignment.
    </li>
  </ul>
  <p>If these assumptions are correct, the extracted <tt>sequence.txt</tt> files will contain the same information as the files used to create the BAM file. However, the presentation of the data will differ slightly from the original:
  <ol>
    <li>Extracted quality scores will be encoded using the "Phred+33" scheme, as opposed to the "Phred+64" scheme used by Illumina.</li>
    <li>
      Illumina output contains the read name twice for each read - once as the read name
      (prefixed by '@'), and once as the quality name (prefixed by '+'). To save space, we do not output the quality name.
    </li>
    <li>If the BAM file has been sorted, the order of the reads in the output files will not match the original order.</li>
  </ol>
  <p>
    However, none of these differences will impact the actual data, merely the representation. So while the files will not
    be byte-for-byte identical, they will contain the same biological data. For example,
    <a href="/information/software/bam2fastq_test">compare the output</a> of the original sequence
    files (s_1_1_sequence.txt and s_1_2_sequence.txt) to the same data extracted from a BAM file
    (s_1_1_extracted.txt and s_1_2_extracted.txt). Notice that the Quality Encoding is different, but the remaining
    values are identical. Also note (on the Files tab) that the size of the extracted files is smaller than the originals.
  </p>
  <p>
    By default, pair names in the BAM file are modified slightly to allow for BAMs that don't quite meet specification. 
    This behavior can be disabled with the <code>--strict</code> flag.
  </p>
  <h2>Parameters</h2>
  <h3>Usage:</h3><p><code>bam2fastq [options] &lt;bam file&gt;</code>
  <h3>Options:</h3>
  <dl>
    <dt><code>-o FILENAME, --output FILENAME</code></dt>
    <dd>
      Specifies the name of the FASTQ file(s) that will be generated.  May contain the special characters <code>%</code> 
      (replaced with the lane number) and <code>#</code> (replaced with <code>_1</code> or <code>_2</code> 
      to distinguish PE reads, removed for SE reads). [Default: <tt>s_%#_sequence.txt</tt>]
    </dd>
    <br>
    <dt><code>-f, --force, --overwrite</code></dt>
    <dd>
      Create output files specified with <code>--output</code>, overwriting existing files if necessary
      [Default: exit program rather than overwrite files]
    </dd>
    <br>
    <dt><code>--aligned</code></dt>
    <dt><code>--no-aligned</code></dt>
    <dd>Reads in the BAM that are aligned will (will not) be extracted. [Default: extract aligned reads]</dd>
    <br>
    <dt><code>--unaligned</code></dt>
    <dt><code>--no-unaligned</code></dt>
    <dd>Reads in the BAM that are not aligned will (will not) be extracted.  [Default: extract unaligned reads]</dd>
    <br>
    <dt><code>--filtered</code></dt>
    <dt><code>--no-filtered</code></dt>
    <dd>Reads that are marked as failing QC checks will (will not) be extracted. [Default: extract filtered reads]</dd>
    <br>
    <dt><code>-q, --quiet</code></dt>
    <dd>Suppress informational messages [Default: print messages]</dd>
    <br>
    <dt><code>-s, --strict</code></dt>
    <dd>Keep bam2fastq's processing to a minimum, assuming that the BAM strictly meets specifications. [Default: allow some errors in the BAM]</dd>
  </dl>

      <hr>

      <footer style="text-align:center">
        <a href="http://www.dls.com"><img src="/static/img/HAD-logo-footer.png"></a>
        <br><br>
      </footer>

    </div> <!-- /container -->

    <script src="/static/js/jquery.js"></script>
    <script src="/static/js/bootstrap.js"></script>
    <script src="/static/plugins/DataTables/datatables.min.js"></script>
    
  
  <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

     ga('create', 'UA-55670661-1', 'auto');
     ga('send', 'pageview');
  </script>


  </body>
</html>