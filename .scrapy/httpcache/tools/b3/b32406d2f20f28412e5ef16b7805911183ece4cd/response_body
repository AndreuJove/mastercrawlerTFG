<!DOCTYPE html>
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <script type="application/shiny-singletons"></script>
  <script type="application/html-dependencies">json2[2014.02.04];jquery[1.12.4];shiny[1.0.3];font-awesome[4.7.0];bootstrap[3.3.7]</script>
<script src="shared/json2-min.js"></script>
<script src="shared/jquery.min.js"></script>
<link href="shared/shiny.css" rel="stylesheet" />
<script src="shared/shiny.min.js"></script>
<link href="shared/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="shared/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<script src="shared/bootstrap/js/bootstrap.min.js"></script>
<script src="shared/bootstrap/shim/html5shiv.min.js"></script>
<script src="shared/bootstrap/shim/respond.min.js"></script>  <title>AlignStat: A tool for the statistical comparison of alternative multiple sequence alignments</title>

<script src="__assets__/sockjs-0.3.4.min.js"></script>
<script src="__assets__/shiny-server-client.min.js"></script>
<script>preShinyInit({reconnect:true,disableProtocols:[]});</script>
<link rel="stylesheet" type="text/css" href="__assets__/shiny-server.css"/>

</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12">
        <h2>AlignStat: A tool for the statistical comparison of alternative multiple sequence alignments</h2>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div class="well">
          <div class="header">
            <p>This webtool compares two alternative multiple sequence alignments (MSAs) to determine how well 
          they align homologous residues in the same columns as one another. It classifies similarities 
          and differences into conserved sequence, conserved gaps, splits, merges and shifts. 
          Summarising these categories for each column yields information on which columns are agreed 
          upon by both MSAs, and which differ. Output graphs visualise the comparison data for analysis.</p>
            <p>
              All of the calculations and plots generated by this webtool can also be generated using the underlying 
              <a href="https://github.com/TS404/AlignStat">AlignStat R package</a>
               which is available on 
              <a href="https://cran.r-project.org/package=AlignStat">CRAN</a>
              
            </p>
            <p>
              AlignStat is fully described in 
              <a href="http://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-016-1300-6"> this paper</a>
              . Please cite the paper if you use this tool in your research
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div data-display-if="!output.comparison_done">
          <div class="col-sm-8">
            <h3>Upload your two alignments to make a comparison</h3>
            <p>Alignments must be in fasta, clustal, msf, or phylip formats. Both alignments should contain the same sequences in any order.</p>
            <p>If you are unsure how to format your inputs or simply want some data to try the app please take a look at the example data.</p>
            <a href="https://dl.dropboxusercontent.com/u/226794/AlignStatShiny/example.zip" class="btn btn-default shiny-download-link">
              <em class="fa fa-download"></em>
              Example Data
            </a>
            <br/>
            <br/>
            <div class="well">
              <div class="form-group shiny-input-container">
                <label>Alignment A in fasta, clustal, msf, or phylip format</label>
                <div class="input-group">
                  <label class="input-group-btn">
                    <span class="btn btn-default btn-file">
                      Browse...
                      <input id="align_a" name="align_a" type="file" style="display: none;"/>
                    </span>
                  </label>
                  <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/>
                </div>
                <div id="align_a_progress" class="progress progress-striped active shiny-file-input-progress">
                  <div class="progress-bar"></div>
                </div>
              </div>
              <div class="form-group shiny-input-container">
                <label>Alignment B in fasta, clustal, msf, or phylip format</label>
                <div class="input-group">
                  <label class="input-group-btn">
                    <span class="btn btn-default btn-file">
                      Browse...
                      <input id="align_b" name="align_b" type="file" style="display: none;"/>
                    </span>
                  </label>
                  <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/>
                </div>
                <div id="align_b_progress" class="progress progress-striped active shiny-file-input-progress">
                  <div class="progress-bar"></div>
                </div>
              </div>
              <div class="form-group shiny-input-container">
                <div class="checkbox">
                  <label>
                    <input id="stack_category_proportions" type="checkbox" checked="checked"/>
                    <span>Stack category proportions</span>
                  </label>
                </div>
              </div>
              <div class="form-group shiny-input-container">
                <div class="checkbox">
                  <label>
                    <input id="show_prop_cys" type="checkbox"/>
                    <span>Show cysteine abundance</span>
                  </label>
                </div>
              </div>
              <div class="form-group shiny-input-container">
                <div class="checkbox">
                  <label>
                    <input id="calculate_column_score" type="checkbox"/>
                    <span>Calculate column score</span>
                  </label>
                </div>
              </div>
              <div class="form-group shiny-input-container">
                <div class="checkbox">
                  <label>
                    <input id="calculate_sum_of_pairs" type="checkbox"/>
                    <span>Calculate sum of pairs</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div data-display-if="output.comparison_done">
          <h3>Your AlignStat results are shown below. To run a new comparison simply refresh this page in your browser</h3>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div data-display-if="output.comparison_done">
          <div class="well">
            <div id="heatmap" class="shiny-plot-output" style="width: 100% ; height: 400px"></div>
            <div id="heatmap_caption" class="shiny-text-output"></div>
            <a id="heatmap_download" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Download
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div data-display-if="output.comparison_done">
          <div class="well">
            <div id="matrix" class="shiny-plot-output" style="width: 100% ; height: 400px"></div>
            <div id="matrix_caption" class="shiny-text-output"></div>
            <a id="matrix_download" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Download
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div data-display-if="output.comparison_done">
          <div class="well">
            <div id="match_summary" class="shiny-plot-output" style="width: 100% ; height: 400px"></div>
            <div id="match_summary_caption" class="shiny-text-output"></div>
            <a id="match_summary_download" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Download
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div data-display-if="output.comparison_done">
          <div class="well">
            <div id="plot_dissimilarity_summary" class="shiny-plot-output" style="width: 100% ; height: 400px"></div>
            <div id="plot_dissimilarity_caption" class="shiny-text-output"></div>
            <a id="dissimilarity_summary_download" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Download
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div data-display-if="output.comparison_has_sum_of_pairs">
          <div class="well">
            <div id="SP_summary" class="shiny-plot-output" style="width: 100% ; height: 400px"></div>
            <div id="SP_summary_caption" class="shiny-text-output"></div>
            <a id="SP_summary_download" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Download
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div data-display-if="output.comparison_done">
          <div class="well">
            <p>When comparing the positions of two MSAs:
            A ‘match’ is when both alignments contain an identical characters that is not a gap.
            A ‘merge’ is when alignment A contains a gap, but alignment B contains any other character.
            A ‘split’ is when alignment B contains a gap, but alignment A contains any other character.
            A ‘shift’ is when two alignments contain a non-identical character, neither of which are gaps.
            A ‘conserved gap’ is when the both alignments contain a gap.</p>
            <p>
              For further information see
              <a href="https://github.com/TS404/AlignStat">github.com/TS404/AlignStat</a>
            </p>
          </div>
          <div class="well">
            <h4>Download results in csv format</h4>
            <a id="similarity_matrix_csv" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Similarity Matrix
            </a>
            <a id="dissimilarity_matrix_csv" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Dissimilarity Matrix
            </a>
            <a id="results_summary_csv" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Results Summary
            </a>
            <p>The Similarity Matrix records which columns of the reference and comparison
            MSAs best match. Its [i,j]th entry is the similarity score between
            the ith column of the reference alignment and the jth column of the
            comparison alignment. Used to determine which columns are most similar
            for further analysis. Used to generate the similarity heatmap plot.</p>
            <p>The Dissimilarity Matrix categorises dissimilarity in the MSF.
            Its [i,j]th entry is the dissimilarity category of the jth
            residue of the ith sequence for the reference alignment versus the
            comparison alignment (M=match, g=conserved gap, m=merge, s=split, x=shift).
            Used to the dissimilarity matrix plot.</p>
            <p>The Results Matrix summarises columnwise similarity and disimilarity.
            Its [i,j]th entry is the ith match category average of the
            jth column of the reference alignment versus the comparison alignment
            (i1=match, i2=conserved gap, i3=merge, i4=split, i5=shift). Used to
            generate the similarity summary and dissimilarity summary plots.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div data-display-if="output.comparison_has_sum_of_pairs">
          <div class="well">
            <h4>Download SPS results in txt and formats</h4>
            <a id="SP_ref_txt" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Sum of Pairs Reference
            </a>
            <a id="SP_com_txt" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Sum of Pairs Comparison
            </a>
            <a id="SP_scores_csv" class="btn btn-default shiny-download-link " href="" target="_blank" download>
              <i class="fa fa-download"></i>
              Sum of Pairs Scores
            </a>
            <p>The Sum of Pairs Reference lists all residue pairs present in the reference
          MSA. The Sum of Pairs Comparison lists all residue pairs present in the
          comparison MSA. The Sum of Pairs Scores lists the proportion of reference
          pairs retained in each column of the comparison MSA</p>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div class="well">
          <p>
            AlignStat was developed by Thomas Shafee and Ira Cooke at the 
            <a href="http://www.latrobe.edu.au/lims">La Trobe Institute of Molecular Science (LIMS)</a>
             and 
            <a href="http://hexima.com.au/">Hexima</a>
          </p>
          <img src="http://cysbar.science.latrobe.edu.au/img/lims.png" width="200px"/>
          <img src="http://cysbar.science.latrobe.edu.au/img/hexima.png" width="200px"/>
        </div>
      </div>
    </div>
  </div>
</body>

</html>
